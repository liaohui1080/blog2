<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>yolov5问题处理 | Begda</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="stylesheet" href="/blog2//at.alicdn.com/t/font_1706538_0cfbwmm8gq77.css">
    <viewport name="viewport" content="width=device-width, initial-scale=1"></viewport>
    <meta name="description" content="yolov5问题处理">
    
    <link rel="preload" href="/blog2/assets/css/0.styles.838fe9c5.css" as="style"><link rel="preload" href="/blog2/assets/js/app.b02c2d25.js" as="script"><link rel="preload" href="/blog2/assets/js/9.79c5898a.js" as="script"><link rel="preload" href="/blog2/assets/js/2.879832ad.js" as="script"><link rel="preload" href="/blog2/assets/js/1.84abd0dc.js" as="script"><link rel="preload" href="/blog2/assets/js/84.67ac3b6e.js" as="script"><link rel="prefetch" href="/blog2/assets/js/10.5515a018.js"><link rel="prefetch" href="/blog2/assets/js/100.0587052a.js"><link rel="prefetch" href="/blog2/assets/js/101.f0b66fa3.js"><link rel="prefetch" href="/blog2/assets/js/102.ef20600a.js"><link rel="prefetch" href="/blog2/assets/js/103.888a2924.js"><link rel="prefetch" href="/blog2/assets/js/104.2d970339.js"><link rel="prefetch" href="/blog2/assets/js/105.c88db4f3.js"><link rel="prefetch" href="/blog2/assets/js/106.b8cd1499.js"><link rel="prefetch" href="/blog2/assets/js/107.dda05608.js"><link rel="prefetch" href="/blog2/assets/js/108.87413efb.js"><link rel="prefetch" href="/blog2/assets/js/109.b3ad8061.js"><link rel="prefetch" href="/blog2/assets/js/110.77a59c6f.js"><link rel="prefetch" href="/blog2/assets/js/111.79586886.js"><link rel="prefetch" href="/blog2/assets/js/112.6e215e0c.js"><link rel="prefetch" href="/blog2/assets/js/113.48687ece.js"><link rel="prefetch" href="/blog2/assets/js/114.d02b2451.js"><link rel="prefetch" href="/blog2/assets/js/115.58302a4b.js"><link rel="prefetch" href="/blog2/assets/js/116.790535b9.js"><link rel="prefetch" href="/blog2/assets/js/117.df19dd84.js"><link rel="prefetch" href="/blog2/assets/js/118.c9012673.js"><link rel="prefetch" href="/blog2/assets/js/119.b0706b62.js"><link rel="prefetch" href="/blog2/assets/js/120.3c8b2642.js"><link rel="prefetch" href="/blog2/assets/js/121.d8a46a94.js"><link rel="prefetch" href="/blog2/assets/js/122.86ae87fa.js"><link rel="prefetch" href="/blog2/assets/js/123.09f21a25.js"><link rel="prefetch" href="/blog2/assets/js/124.49d5cdbc.js"><link rel="prefetch" href="/blog2/assets/js/125.670e3ad7.js"><link rel="prefetch" href="/blog2/assets/js/126.27b07dba.js"><link rel="prefetch" href="/blog2/assets/js/13.85d226f6.js"><link rel="prefetch" href="/blog2/assets/js/14.2ca8221b.js"><link rel="prefetch" href="/blog2/assets/js/15.34702f4f.js"><link rel="prefetch" href="/blog2/assets/js/16.474250a5.js"><link rel="prefetch" href="/blog2/assets/js/17.5355daae.js"><link rel="prefetch" href="/blog2/assets/js/18.1330cf93.js"><link rel="prefetch" href="/blog2/assets/js/19.b6d12bf9.js"><link rel="prefetch" href="/blog2/assets/js/20.dc64b1a8.js"><link rel="prefetch" href="/blog2/assets/js/21.279e807d.js"><link rel="prefetch" href="/blog2/assets/js/22.5b7085de.js"><link rel="prefetch" href="/blog2/assets/js/23.59b3068d.js"><link rel="prefetch" href="/blog2/assets/js/24.66eb3f63.js"><link rel="prefetch" href="/blog2/assets/js/25.689f573c.js"><link rel="prefetch" href="/blog2/assets/js/26.1e278927.js"><link rel="prefetch" href="/blog2/assets/js/27.60b83a9e.js"><link rel="prefetch" href="/blog2/assets/js/28.13bc7434.js"><link rel="prefetch" href="/blog2/assets/js/29.ac99c8a4.js"><link rel="prefetch" href="/blog2/assets/js/3.9f18cd13.js"><link rel="prefetch" href="/blog2/assets/js/30.b39d0d77.js"><link rel="prefetch" href="/blog2/assets/js/31.a5f168dd.js"><link rel="prefetch" href="/blog2/assets/js/32.3a45a20a.js"><link rel="prefetch" href="/blog2/assets/js/33.cbd0dd36.js"><link rel="prefetch" href="/blog2/assets/js/34.10fd4207.js"><link rel="prefetch" href="/blog2/assets/js/35.86ed4639.js"><link rel="prefetch" href="/blog2/assets/js/36.b614f9d5.js"><link rel="prefetch" href="/blog2/assets/js/37.68e84d95.js"><link rel="prefetch" href="/blog2/assets/js/38.a60c2d4c.js"><link rel="prefetch" href="/blog2/assets/js/39.8208ae2b.js"><link rel="prefetch" href="/blog2/assets/js/4.099f525d.js"><link rel="prefetch" href="/blog2/assets/js/40.22dfa4f5.js"><link rel="prefetch" href="/blog2/assets/js/41.04d793fb.js"><link rel="prefetch" href="/blog2/assets/js/42.dff6d5af.js"><link rel="prefetch" href="/blog2/assets/js/43.fea6751e.js"><link rel="prefetch" href="/blog2/assets/js/44.ad812446.js"><link rel="prefetch" href="/blog2/assets/js/45.c3f33c1f.js"><link rel="prefetch" href="/blog2/assets/js/46.8cc6d131.js"><link rel="prefetch" href="/blog2/assets/js/47.b56aa147.js"><link rel="prefetch" href="/blog2/assets/js/48.b759c909.js"><link rel="prefetch" href="/blog2/assets/js/49.2e61b8ea.js"><link rel="prefetch" href="/blog2/assets/js/5.b80917f6.js"><link rel="prefetch" href="/blog2/assets/js/50.40361352.js"><link rel="prefetch" href="/blog2/assets/js/51.4c7dbd46.js"><link rel="prefetch" href="/blog2/assets/js/52.a45b9ed2.js"><link rel="prefetch" href="/blog2/assets/js/53.6630d5e0.js"><link rel="prefetch" href="/blog2/assets/js/54.0748ee36.js"><link rel="prefetch" href="/blog2/assets/js/55.2d691885.js"><link rel="prefetch" href="/blog2/assets/js/56.76601045.js"><link rel="prefetch" href="/blog2/assets/js/57.b9645c52.js"><link rel="prefetch" href="/blog2/assets/js/58.a6cac3be.js"><link rel="prefetch" href="/blog2/assets/js/59.909ed9c8.js"><link rel="prefetch" href="/blog2/assets/js/6.cb014d03.js"><link rel="prefetch" href="/blog2/assets/js/60.7b726752.js"><link rel="prefetch" href="/blog2/assets/js/61.df28f36b.js"><link rel="prefetch" href="/blog2/assets/js/62.29995d9d.js"><link rel="prefetch" href="/blog2/assets/js/63.5e525206.js"><link rel="prefetch" href="/blog2/assets/js/64.c8914f80.js"><link rel="prefetch" href="/blog2/assets/js/65.2d4eb120.js"><link rel="prefetch" href="/blog2/assets/js/66.b341844a.js"><link rel="prefetch" href="/blog2/assets/js/67.2de20d2b.js"><link rel="prefetch" href="/blog2/assets/js/68.2bc0af22.js"><link rel="prefetch" href="/blog2/assets/js/69.94b0a420.js"><link rel="prefetch" href="/blog2/assets/js/7.352b34a6.js"><link rel="prefetch" href="/blog2/assets/js/70.acc7b9df.js"><link rel="prefetch" href="/blog2/assets/js/71.c5f62044.js"><link rel="prefetch" href="/blog2/assets/js/72.9bc0b32c.js"><link rel="prefetch" href="/blog2/assets/js/73.ec85a502.js"><link rel="prefetch" href="/blog2/assets/js/74.0bf94cce.js"><link rel="prefetch" href="/blog2/assets/js/75.00816258.js"><link rel="prefetch" href="/blog2/assets/js/76.af0df84d.js"><link rel="prefetch" href="/blog2/assets/js/77.ed70e584.js"><link rel="prefetch" href="/blog2/assets/js/78.1b34a21d.js"><link rel="prefetch" href="/blog2/assets/js/79.a628858c.js"><link rel="prefetch" href="/blog2/assets/js/8.4bc89c4a.js"><link rel="prefetch" href="/blog2/assets/js/80.abbd6619.js"><link rel="prefetch" href="/blog2/assets/js/81.b8841d84.js"><link rel="prefetch" href="/blog2/assets/js/82.fa067f65.js"><link rel="prefetch" href="/blog2/assets/js/83.983fc8bc.js"><link rel="prefetch" href="/blog2/assets/js/85.1753abf7.js"><link rel="prefetch" href="/blog2/assets/js/86.a6758681.js"><link rel="prefetch" href="/blog2/assets/js/87.dcea1a54.js"><link rel="prefetch" href="/blog2/assets/js/88.034c5c67.js"><link rel="prefetch" href="/blog2/assets/js/89.e0b5e135.js"><link rel="prefetch" href="/blog2/assets/js/90.b7d743b1.js"><link rel="prefetch" href="/blog2/assets/js/91.139c48c9.js"><link rel="prefetch" href="/blog2/assets/js/92.cd413a2e.js"><link rel="prefetch" href="/blog2/assets/js/93.f692e568.js"><link rel="prefetch" href="/blog2/assets/js/94.31dfcc09.js"><link rel="prefetch" href="/blog2/assets/js/95.6fd9c168.js"><link rel="prefetch" href="/blog2/assets/js/96.e69155ae.js"><link rel="prefetch" href="/blog2/assets/js/97.8dddaef2.js"><link rel="prefetch" href="/blog2/assets/js/98.2aab0b01.js"><link rel="prefetch" href="/blog2/assets/js/99.547c1629.js"><link rel="prefetch" href="/blog2/assets/js/vendors~docsearch.5f58ad8a.js">
    <link rel="stylesheet" href="/blog2/assets/css/0.styles.838fe9c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog2/" class="home-link router-link-active"><img src="/blog2/images/logo.jpg" alt="Begda" class="logo"> <span class="site-name can-hide">Begda</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog2/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog2/BegdaUI/" class="nav-link">
  BegdaUI
</a></div><div class="nav-item"><a href="/blog2/易经/" class="nav-link">
  易经
</a></div><div class="nav-item"><a href="/blog2/梅花易数/" class="nav-link">
  梅花易数
</a></div><div class="nav-item"><a href="/blog2/小说/首页.html" class="nav-link">
  小说
</a></div><div class="nav-item"><a href="/blog2/收藏/网址.html" class="nav-link">
  收藏
</a></div><div class="nav-item"><a href="//github.com/begda/begda-ui/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog2/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog2/BegdaUI/" class="nav-link">
  BegdaUI
</a></div><div class="nav-item"><a href="/blog2/易经/" class="nav-link">
  易经
</a></div><div class="nav-item"><a href="/blog2/梅花易数/" class="nav-link">
  梅花易数
</a></div><div class="nav-item"><a href="/blog2/小说/首页.html" class="nav-link">
  小说
</a></div><div class="nav-item"><a href="/blog2/收藏/网址.html" class="nav-link">
  收藏
</a></div><div class="nav-item"><a href="//github.com/begda/begda-ui/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Yolo</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog2/Lib/yolo/" aria-current="page" class="sidebar-link">机器学习</a></li><li><a href="/blog2/Lib/yolo/1.钻杆计算.html" class="sidebar-link">钻杆计算</a></li><li><a href="/blog2/Lib/yolo/2. yolov5问题处理.html" class="active sidebar-link">yolov5问题处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog2/Lib/yolo/2. yolov5问题处理.html#_1-omp-error-initializing-libiomp5md-dll-but-found-libiomp5md-dll-already-initialized" class="sidebar-link">1. OMP: Error   Initializing libiomp5md.dll, but found libiomp5md.dll already initialized.</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog2/Lib/yolo/2. yolov5问题处理.html#错误原因" class="sidebar-link">错误原因</a></li><li class="sidebar-sub-header"><a href="/blog2/Lib/yolo/2. yolov5问题处理.html#错误代码" class="sidebar-link">错误代码</a></li><li class="sidebar-sub-header"><a href="/blog2/Lib/yolo/2. yolov5问题处理.html#解决方案" class="sidebar-link">解决方案</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog2/Lib/yolo/2. yolov5问题处理.html#_2-yolov5中的-torchvision-nms-错误问题解决方法" class="sidebar-link">2. YOLOv5中的&quot;torchvision::nms&quot;错误问题解决方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog2/Lib/yolo/2. yolov5问题处理.html#错误原因-2" class="sidebar-link">错误原因</a></li><li class="sidebar-sub-header"><a href="/blog2/Lib/yolo/2. yolov5问题处理.html#错误代码-2" class="sidebar-link">错误代码</a></li><li class="sidebar-sub-header"><a href="/blog2/Lib/yolo/2. yolov5问题处理.html#解决方案-2" class="sidebar-link">解决方案</a></li></ul></li></ul></li><li><a href="/blog2/Lib/yolo/3.CUDA显卡配置.html" class="sidebar-link">CUDA配置</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-omp-error-initializing-libiomp5md-dll-but-found-libiomp5md-dll-already-initialized"><a href="#_1-omp-error-initializing-libiomp5md-dll-but-found-libiomp5md-dll-already-initialized" class="header-anchor">#</a> 1. OMP: Error   Initializing libiomp5md.dll, but found libiomp5md.dll already initialized.</h2> <h3 id="错误原因"><a href="#错误原因" class="header-anchor">#</a> 错误原因</h3> <p>OpenMP 运行时的多个副本已链接到程序中。这可能导致性能下降或不正确的结果</p> <h3 id="错误代码"><a href="#错误代码" class="header-anchor">#</a> 错误代码</h3> <blockquote><p>OMP: Error #15: Initializing libiomp5md.dll, but found libiomp5md.dll already initialized.
OMP: Hint This means that multiple copies of the OpenMP runtime have been linked into the program. That is dangerous, since it can degrade performance or cause incorrect results. The best thing to do is to ensure that only a single OpenMP runtime is linked into the process, e.g. by avoiding static linking of the OpenMP runtime in any library. As an unsafe, unsupported, undocumented workaround you can set the environment variable KMP_DUPLICATE_LIB_OK=TRUE to allow the program to continue to execute, but that may cause crashes or silently produce incorrect results. For more information, please see http://www.intel.com/software/products/support/.</p></blockquote> <h3 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h3> <p>解决方法：代码前加入两行如下代码即可</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> os
os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">&quot;KMP_DUPLICATE_LIB_OK&quot;</span><span class="token punctuation">]</span>  <span class="token operator">=</span>  <span class="token string">&quot;TRUE&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_2-yolov5中的-torchvision-nms-错误问题解决方法"><a href="#_2-yolov5中的-torchvision-nms-错误问题解决方法" class="header-anchor">#</a> 2. YOLOv5中的&quot;torchvision::nms&quot;错误问题解决方法</h2> <h3 id="错误原因-2"><a href="#错误原因-2" class="header-anchor">#</a> 错误原因</h3> <blockquote><p>“torchvision::nms”是PyTorch库中的一个函数，用于实现非极大值抑制（Non-Maximum Suppression，NMS）。NMS是物体检测算法中的一个重要步骤，它能够帮助我们去除冗余的检测框，保留最佳的预测结果。
'torchvision::nms’无法在’cuda’后端运行。通常，这种问题出现在以下两种情况：</p></blockquote> <ol><li>PyTorch与Torchvision版本不匹配
如果正在使用的PyTorch版本和Torchvision版本之间存在不兼容性，就可能会遇到这个问题。这是因为Torchvision库的某些功能依赖于特定版本的PyTorch，当两者版本不匹配时，就可能导致问题。</li> <li>CUDA版本问题
另一种可能的原因是CUDA版本问题。具体来说，如果安装的CUDA版本与PyTorch或Torchvision所需的版本不符，也可能会出现此问题。</li></ol> <h3 id="错误代码-2"><a href="#错误代码-2" class="header-anchor">#</a> 错误代码</h3> <blockquote><p>NotImplementedError: Could not run 'torchvision::nms' with arguments from the 'CUDA' backend. This could be because the operator doesn't exist for this backend, or was omitted during the selective/custom build process (if using custom build). If you are a Facebook employee using PyTorch on mobile, please visit https://fburl.com/ptmfixes for possible resolutions. 'torchvision::nms' is only available for these backends</p></blockquote> <h3 id="解决方案-2"><a href="#解决方案-2" class="header-anchor">#</a> 解决方案</h3> <ol><li>确保PyTorch和Torchvision版本匹配</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> torch
<span class="token keyword">import</span> torchvision
<span class="token keyword">print</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span>      <span class="token comment">#返回纯数字是正确的</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>torchvision<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span> <span class="token comment"># 返回纯数字是正确的 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>返回数据类似这样的就是正常的。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>如果里面有 cpu 这些字段就是版本不匹配，尽量不要安装最新版
2.0.0
0.15.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>如果发现版本不匹配，可以通过卸载,然后去pytorch重新安装，目前安装2.0比较正常：</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code>pip uninstall torch torchvision  <span class="token comment">#卸载pytorch</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>确保CUDA版本和pytorch里需要的版本一样</li></ol> <blockquote><p>下面命令查看cuda版本，如果cuda版本是1.8 ，那么在安装pytorch的时候就要选择1.8版本的cuda安装，pytorch网站上有对应的选项。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>nvcc <span class="token parameter variable">--version</span>   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>cuda版本可以低于 nvidia-smi里显卡显示的cuda版本，因为高版本的cuda可以兼容低版本的。</p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2024/7/30 17:14:28</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog2/Lib/yolo/1.钻杆计算.html" class="prev">
        钻杆计算
      </a></span> <span class="next"><a href="/blog2/Lib/yolo/3.CUDA显卡配置.html">
        CUDA配置
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog2/assets/js/app.b02c2d25.js" defer></script><script src="/blog2/assets/js/9.79c5898a.js" defer></script><script src="/blog2/assets/js/2.879832ad.js" defer></script><script src="/blog2/assets/js/1.84abd0dc.js" defer></script><script src="/blog2/assets/js/84.67ac3b6e.js" defer></script>
  </body>
</html>
